(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(76)},30:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),l=a.n(s),o=(a(30),a(1)),i=a(2),c=a(4),u=a(3),p=a(5),h=a(22),d=a.n(h),m=a(10),f=a(8),S=a(9),g=a.n(S),b=a(14),v=a.n(b),y=(a(53),a(54),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"LoadingSpinnerContainer"},r.a.createElement("i",{className:"fa fa-3x fa-pulse fa-spinner","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Loading..."))}}]),t}(n.Component)),E=a(7),j=a.n(E),N=a(23),O=a.n(N),w=(a(68),a(69),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("i",{className:"fa fa-spinner fa-pulse",id:"loadingSpinner"})}}]),t}(n.Component));var C=function(e){return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement("input",e))},k=function(e){return e.Haltestellenname},D=function(e){return r.a.createElement("div",null,e.Haltestellenname)},T=function(e){return e.trim().length>2},L=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).onSuggestionSelected=function(t,a){var n=a.suggestion;e.props.handleNewSelectedStop(n.VGNKennung)},e.onChange=function(t,a){var n=a.newValue;e.setState({value:n})},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.getSuggestions(a)},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.state={value:"",suggestions:[],isLoading:!1},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"getStopArray",value:function(e){var t=this;this.setState({isLoading:!0}),g.a.get("https://start.vag.de/dm/api/haltestellen.json/vgn",{params:{name:e}}).then(function(e){t.setState({suggestions:e.data.Haltestellen.slice(0,15),isLoading:!1})},function(e){console.error(e)})}},{key:"getSuggestions",value:function(e){var t=e.trim().toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");0===t.length?this.setState({suggestions:[]}):this.getStopArray(t)}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n=e.isLoading,s={placeholder:"Search for stops",value:t,className:"form-control",onChange:this.onChange};return r.a.createElement("div",{className:"SearchStopField"},r.a.createElement(O.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:k,renderSuggestion:D,inputProps:s,shouldRenderSuggestions:T,renderInputComponent:C}),n?r.a.createElement(w,null):null)}}]),t}(n.Component);L.props={handleNewSelectedStop:j.a.func};var F=L,H=(a(70),a(71),a(72),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"styleTransitType",value:function(e){switch(e?e.toLowerCase():""){case"ubahn":return{cssClass:"ubahn",symbolStr:"fa-train"};case"tram":return{cssClass:"tram",symbolStr:"fa-subway"};case"bus":default:return{cssClass:"bus",symbolStr:"fa-bus"}}}},{key:"render",value:function(){var e=this.props.departureLine,t=this.props.departureTransitType,a=this.styleTransitType(t);return r.a.createElement("span",{className:"departureTransitType"},r.a.createElement("i",{className:"fa "+a.symbolStr,"aria-hidden":"true"}),r.a.createElement("span",{className:"departureLine "+a.cssClass},e))}}]),t}(n.Component)),A=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="isInTime";return this.props.delay&&(e=this.props.delay.isDelayed?"isDelayed":"isInTime"),r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement("span",{className:"departureTime"},this.props.departureTime),r.a.createElement("span",{className:"departureDelay "+e},"+",this.props.delay?this.props.delay.time:"0")),r.a.createElement("td",null,r.a.createElement(H,{departureLine:this.props.departureLine,departureTransitType:this.props.departureTransitType})),r.a.createElement("td",null,r.a.createElement("span",{className:"departureDirection"},this.props.departureDirection)))}}]),t}(n.Component),R=a(24),V=a.n(R);var G=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[],t=this.props.departures?this.props.departures:[],a=this.props.Haltestellenname?this.props.Haltestellenname:"";return"undefined"!==typeof t&&t.length>0?(t.forEach(function(t,a){var n,s=function(e,t){var a=new Date(e),n=new Date(t)-a;return n<6e4?{isDelayed:!1,time:0}:{isDelayed:!0,time:Math.floor(n/6e4)}}(t.AbfahrtszeitSoll,t.AbfahrtszeitIst);e.push(r.a.createElement("tr",{className:"departureRow",key:a},r.a.createElement(A,{departureTime:(n=t.AbfahrtszeitSoll,V.a.parseZone(n).format("HH:mm")),delay:s,departureDirection:t.Richtungstext,departureLine:t.Linienname,departureTransitType:t.Produkt,key:a})))}),r.a.createElement("div",{className:"deapartureContainer"},r.a.createElement("div",{className:"btn-toolbar pull-right"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",onClick:this.props.newSearchButtonFn,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{className:"fa fa-search"})," New Search"))),r.a.createElement("h3",null,a),r.a.createElement("table",{className:"table table-striped<"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Line"),r.a.createElement("th",null,"Direction"))),r.a.createElement("tbody",null,e)))):null}}]),t}(n.Component);a(74);function I(e){return r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("button",{onClick:function(t){return e.searchStop(t,e.stop.VGNKennung)},className:"btn btn-outline-secondary btn-sm"},e.stop.Haltestellenname))}function B(e){var t=e.stops.map(function(t){return r.a.createElement(I,{key:t.VGNKennung.toString(),stop:t,searchStop:e.searchStop})});return r.a.createElement("ul",{className:"list-inline"},t)}var K=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.lastStops?Object(m.a)(this.props.lastStops).reverse():[];return e.length>0?function(e,t){return r.a.createElement("div",{className:"LastStopsContainer"},r.a.createElement(B,{stops:e,searchStop:t}))}(e,this.props.searchStop):null}}]),t}(n.Component);K.props={lastStops:j.a.array,searchStop:j.a.func};var q=K,x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={departures:[],actualStop:null,lastStops:[],loadingDepartures:!1,showSearchStopField:!0},a.handleNewSelectedStop=a.handleNewSelectedStop.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({lastStops:v.a.get("lastStops")||[]})}},{key:"addNewLastStopItemToState",value:function(e){this.setState(function(t){var a,n=(a=e,t.lastStops.findIndex(function(e){return e.VGNKennung===a.VGNKennung}));n>=0?t.lastStops.splice(n,1):t.lastStops.length>2&&t.lastStops.shift();var r=[].concat(Object(m.a)(t.lastStops),[e]);return v.a.set("lastStops",r),{lastStops:r}})}},{key:"getDepartureArray",value:function(e){var t=this;this.setState({departures:[],loadingDepartures:!0,showSearchStopField:!1}),g()({method:"get",baseURL:"https://start.vag.de/dm/api/abfahrten.json/vgn",url:"/"+e.toString()}).then(function(e){var a={Haltestellenname:e.data.Haltestellenname,VGNKennung:e.data.VGNKennung};t.setState({loadingDepartures:!1,departures:e.data.Abfahrten,actualStop:a}),t.addNewLastStopItemToState(a)},function(e){console.error(e)})}},{key:"handleNewSelectedStop",value:function(e){this.getDepartureArray(e)}},{key:"newSearchButtonClicked",value:function(e){e.preventDefault(),this.setState({showSearchStopField:!0,departures:[]})}},{key:"handleSearchStop",value:function(e,t){e.preventDefault(),this.getDepartureArray(t)}},{key:"render",value:function(){var e=this.state.departures,t=this.state.actualStop?this.state.actualStop.Haltestellenname:"";return r.a.createElement("div",{className:"departureComponent"},this.state.showSearchStopField?r.a.createElement(F,{handleNewSelectedStop:this.handleNewSelectedStop}):null,this.state.showSearchStopField?r.a.createElement(q,{lastStops:this.state.lastStops,searchStop:this.handleSearchStop.bind(this)}):null,r.a.createElement(G,{departures:e,Haltestellenname:t,newSearchButtonFn:this.newSearchButtonClicked.bind(this)}),this.state.loadingDepartures?r.a.createElement(y,null):null)}}]),t}(n.Component);x.props={};var z=x,$=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"contentContainer"},r.a.createElement("h2",null,"Departure Board ",r.a.createElement("small",{className:"nowrap"},"for VAG N\xfcrnberg")," "),r.a.createElement(z,null))))),r.a.createElement(d.a,{href:"https://github.com/justusjonas74/vag-departures",size:"60"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(75);l.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.0d4d56c0.chunk.js.map